import e from"react";import t from"react-dom";import n from"classnames";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function i(t){var i=t.namespace,a=void 0===i?"cookie-consent":i,c=t.title,l=t.children,s=t.allowButtonLabel,u=t.denyButtonLabel,p=t.onAllow,d=t.onDeny,f=t.position,m=t.contentRef,w=t.className,b=o(t,["namespace","title","children","allowButtonLabel","denyButtonLabel","onAllow","onDeny","position","contentRef","className"]);return e.createElement("div",r({className:n(""+a,f&&a+"--"+f,w),role:"region","aria-live":"polite","aria-labelledby":a+"-title","aria-describedby":a+"-description"},b),e.createElement("div",{role:"document",className:a+"__container",tabIndex:"0",ref:m},e.createElement("h2",{id:a+"-title",className:a+"__title"},c),e.createElement("div",{id:a+"-description",className:a+"__description"},l),e.createElement("div",{className:a+"__button-group"},u&&e.createElement("button",{className:a+"__button "+a+"__button--deny",type:"button",onClick:d},u),s&&e.createElement("button",{className:a+"__button "+a+"__button--allow",type:"button",onClick:p},s))))}function a(t){var a=t.namespace,c=void 0===a?"cookie-consent":a,l=t.i18n,s=t.answer,u=t.setAnswer,p=t.constants,d=p.ALLOW,f=p.DENY,m=t.text,w=o(t,["namespace","i18n","answer","setAnswer","constants","text"]);return s?null:e.createElement(i,r({namespace:c,onAllow:function(){return u(d)},onDeny:function(){return u(f)},title:l("title"),allowButtonLabel:l("allow"),denyButtonLabel:l("deny")},w),m||e.createElement("p",null,l("text")," ",e.createElement("a",{href:l("readMoreURL"),className:n(c+"__more")},l("readMore"))))}function c(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function l(e){c(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function s(e,t){c(2,arguments);var n=l(e),r=l(t),o=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return 12*o+i}function u(e,t){c(2,arguments);var n=l(e),r=l(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}var p,d,f,m,w,b,v,y,g,h="javascript/blocked",k={blacklist:window.YETT_BLACKLIST,whitelist:window.YETT_WHITELIST},E={blacklisted:[]},L=function(e,t){return e&&(!t||t!==h)&&(!k.blacklist||k.blacklist.some(function(t){return t.test(e)}))&&(!k.whitelist||k.whitelist.every(function(t){return!t.test(e)}))},S=function(e){var t=e.getAttribute("src");return k.blacklist&&k.blacklist.every(function(e){return!e.test(t)})||k.whitelist&&k.whitelist.some(function(e){return e.test(t)})},O=new MutationObserver(function(e){for(var t=0;t<e.length;t++)for(var n=e[t].addedNodes,r=function(e){var t=n[e];1===t.nodeType&&"SCRIPT"===t.tagName&&L(t.src,t.type)&&(E.blacklisted.push([t,t.type]),t.type=h,t.addEventListener("beforescriptexecute",function e(n){t.getAttribute("type")===h&&n.preventDefault(),t.removeEventListener("beforescriptexecute",e)}),t.parentElement&&t.parentElement.removeChild(t))},o=0;o<n.length;o++)r(o)}),A=document.createElement,N={src:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src"),type:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"type")},_=new RegExp("[|\\{}()[\\]^$+*?.]","g"),D={en:{title:"This web site uses cookies",text:"We use cookies in order to enrich and personalize your experience, understand traffic and target ads. You can approve the default cookies, or fine tune them under Settings.",allow:"Allow",deny:"Deny",readMore:"Read more about cookies",readMoreURL:"/about-cookies"},sv:{title:"Vår webbplats använder cookies",text:"Vi använder cookies för att förbättra din upplevelse, analysera trafik och anpassa marknadsföring. Godkänn våra cookies eller finjustera under Inställningar.",allow:"Tillåt",deny:"Neka",readMore:"Läs mer om cookies",readMoreURL:"/om-cookies"}},j=!1,x=e.createRef(),T="whitespace/cookie-consent",M="allow",R="deny";function C(e,t){p=e.whitelist||[],d=e.resetElement||".js-cookie-consent-reset";var n=e.currentLanguage||"en";m=r({},D[n]||D.en,e.messages&&e.messages[n]||{}),w=e.onAnswer||function(){},b=e.onAllow||function(){},v=e.onDeny||function(){},y=e.onUnblockScripts||function(){},g=r({namespace:e.namespace||"cookie-consent",position:e.position||"bottom-left"},e.componentProps),"allow"!==Y()&&(j||(window.location.origin&&p.push(window.location.origin+"/*"),function(e){var t=void 0===e?{}:e,n=t.blacklist,r=t.whitelist;k.blacklist=(k.blacklist||n)&&[].concat(k.blacklist||[],n||[]),k.whitelist=(k.whitelist||r)&&[].concat(k.whitelist||[],r||[]),O.observe(document.documentElement,{childList:!0,subtree:!0}),document.createElement=function(){var e=[].slice.call(arguments);if("script"!==e[0].toLowerCase())return A.bind(document).apply(void 0,e);var t=A.bind(document).apply(void 0,e);try{Object.defineProperties(t,{src:{get:function(){return N.src.get.call(this)},set:function(e){L(e,t.type)&&N.type.set.call(this,h),N.src.set.call(this,e)}},type:{set:function(e){var n=L(t.src,t.type)?h:e;N.type.set.call(this,n)}}}),t.setAttribute=function(e,n){"type"===e||"src"===e?t[e]=n:HTMLScriptElement.prototype.setAttribute.call(t,e,n)}}catch(e){console.warn("Yett: unable to prevent script execution for script src ",t.src,".\n",'A likely cause would be because you are using a third-party browser extension that monkey patches the "document.createElement" function.')}return t}}({whitelist:p=p.map(function(e){return new RegExp("^"+e.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*")+"$")})}),j=!0)),document.addEventListener("DOMContentLoaded",function(){var e;f||(f=document.createElement("div"),document.body.appendChild(f)),(e=H(d))&&e.addEventListener("click",function(){q()}),U(t)}),window.addEventListener("storage",function(e){null!=e.key&&"whitespace/cookie-consent"!==e.key||W()})}var I={answer:null,answeredOn:null};function B(e,t){localStorage.setItem("whitespace/cookie-consent",JSON.stringify(e)),W(t)}function Y(){var e=function(){var e=localStorage.getItem("whitespace/cookie-consent");if(e)try{return JSON.parse(e)||I}catch(e){return I}return I}(),t=e.answer,n=e.answeredOn;return null!=t&&function(e,t){c(2,arguments);var n=l(e),r=l(t),o=u(n,r),i=Math.abs(s(n,r));n.setMonth(n.getMonth()-o*i);var a=u(n,r)===-o,p=o*(i-a);return 0===p?0:p}(new Date,new Date(n))<12?t:null}function P(e,t){B({answer:e,answeredOn:(new Date).toISOString()},t),w(e),"allow"===e?b():null!=e&&v()}function W(e){"allow"===Y()&&(j&&(function(){var e=[].slice.call(arguments);e.length<1?(k.blacklist=[],k.whitelist=[]):(k.blacklist&&(k.blacklist=k.blacklist.filter(function(t){return e.every(function(e){return"string"==typeof e?!t.test(e):e instanceof RegExp?t.toString()!==e.toString():void 0})})),k.whitelist&&(k.whitelist=[].concat(k.whitelist,e.map(function(e){if("string"==typeof e){var t=".*"+e.replace(_,"\\$&")+".*";if(k.whitelist.every(function(e){return e.toString()!==t.toString()}))return new RegExp(t)}else if(e instanceof RegExp&&k.whitelist.every(function(t){return t.toString()!==e.toString()}))return e;return null}).filter(Boolean))));for(var t=document.querySelectorAll('script[type="javascript/blocked"]'),n=0;n<t.length;n++){var r=t[n];S(r)&&(E.blacklisted.push([r,"application/javascript"]),r.parentElement.removeChild(r))}var o=0;[].concat(E.blacklisted).forEach(function(e,t){var n=e[0],r=e[1];if(S(n)){var i=document.createElement("script");for(var a in i.setAttribute("src",n.src),i.setAttribute("type",r||"application/javascript"),n)a.startsWith("on")&&(i[a]=n[a]);document.head.appendChild(i),E.blacklisted.splice(t-o,1),o++}}),k.blacklist&&k.blacklist.length<1&&O.disconnect()}(),j=!1),y()),U(e)}function $(e){return m[e]}function H(e){return"string"==typeof e?document.querySelector(e):e}function U(n){t.render(e.createElement(a,r({i18n:$,answer:Y(),setAnswer:P,constants:{ALLOW:"allow",DENY:"deny"},contentRef:x},g)),H(f),n)}function q(){B(null,function(){x.current&&x.current.focus()})}export{M as ALLOW,R as DENY,T as LOCALSTORAGE_ITEM,Y as getAnswer,C as init,q as reset,P as setAnswer};
//# sourceMappingURL=cookie-consent.module.js.map
